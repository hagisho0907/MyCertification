# 要件定義書

## プロジェクト概要
- プロジェクト名: MyCertification
- 目的: AWS Certified DevOps Engineer - Professional の過去問を自習できるモダンでシンプルな Web アプリを提供する。
- 概要: CSV で管理した過去問データをもとに、1ページあたり約20問を表示し、各問題の解答と解説をクイズ形式で確認できる。学習者は「第 n 回目」のセッションを開始して解答し、学習履歴（正誤・復習状況）をローカルに記録しながら繰り返し学習できる。セッション履歴は一覧として積み上げ表示し、途中のセッションも任意のタイミングで再開できる。
- 参考サイト: https://www.examtopics.com/ の表示形式をベンチマークとする。

## 対象範囲
- 対象ユーザー: 開発者本人（単独利用）。ログイン機能は当面不要。
- 対象資格: MVP では AWS Certified DevOps Engineer - Professional のみ。将来的な複数資格展開は考慮するが本スコープ外。
- 対応デバイス: PC ブラウザを主対象、タブレットでの閲覧も想定。スマートフォン表示は優先度低。

## 想定ユースケース
1. 利用者がトップページで最新の進捗概要とこれまでの「第 n 回目」までの履歴を確認する。
2. 「第 n+1 回目の学習を開始」ボタンから新しいセッションを確定し、問題一覧ページへ遷移する（途中保存されたセッションがあれば再開も可能）。
3. 問題一覧ページで 1ページ20問のカードを順番に解き、選択肢を選んで回答を表示する。
4. 正誤と解説を確認したタイミングで選択状態が自動リセットされ、同じ問題を続けて解き直すこともできる。解答履歴（正誤・解答時刻・試行回数）はセッション内に蓄積される。
5. 復習対象にしたい問題はフラグを付与し、不正解の場合は自動でフラグが立つ。復習フラグはセッションを跨いで保持される。
6. ページ末尾またはヘッダーで、現在のセッション成績と累積の指標を確認する。
7. セッション履歴一覧から、過去の成績を確認しつつ途中のセッションを再開できる。
8. セッション履歴から詳細を開き、各問題と正誤・解説を再確認できる。
9. 学習履歴はブラウザのローカルストレージに保存され、未完了セッションは完了扱いにせず次回再開できる。
10. 運用者は CSV を更新し、変換スクリプトで JSON を再生成してリポジトリに反映する。

## 機能要件
- F-01 認定試験選択: 初期は DevOps Pro 固定だが、将来的な追加に備え、試験メタデータを切り出しておく。
- F-02 問題一覧表示: 1ページ20問をカード形式で表示し、スクロールで閲覧できる。
- F-03 選択肢操作: 単一選択はラジオボタンを選択した時点で回答確定、複数選択はチェックボックスと「回答を確定」ボタンで判定し、確定後に正誤を表示してロックする。解説表示後は選択状態をリセットし、同セッション内で再挑戦できる。
- F-04 解説表示: 回答後に解説テキストと参照リンクを表示する。初期状態では折りたたみでも可。
- F-05 学習セッション管理: 「第 n 回目」のセッションを作成・再開できる UI とロジックを提供し、セッション番号を自動採番する。
- F-06 セッション進捗記録: セッション単位で各問題の正誤・回答時刻・試行回数を保存し、履歴から成績を算出できるようにする。
- F-07 サマリー表示: 現在のセッション成績と累積（全セッション共通）の指標をヘッダーまたはサイドに表示する。
- F-08 セッション履歴表示: 過去セッションをカード状に積み上げて表示し、正答率・解答数・期間などを確認できる。
- F-09 セッション詳細閲覧: 履歴カードから問題一覧・正誤・解説を再確認できるモーダル/別画面を提供する。
- F-10 データ取り込み: CSV ファイルから JSON データへ変換するスクリプトを備え、Next.js で静的に読み込める形へ整形する。
- F-11 復習フィルタ: 復習フラグや直近の不正解のみを抽出して表示する機能。フラグはセッションを跨いで維持される。
- F-12 データリセット: ローカルストレージの学習履歴を初期化する手段を提供する（リセット前に確認ダイアログを表示）。

## 非機能要件
- 技術スタック: Next.js、Tailwind CSS、Vercel（ホスティング）。
- パフォーマンス: 20問程度のページで初回ロード 1 秒以内（Vercel 上での静的ビルドを想定）。
- ユーザビリティ: シンプルでモダンなデザイン。キーボード操作やアクセシビリティ属性（aria）を可能な範囲で付与する。表示はタブレット以上を最適化し、スマートフォンは幅768px未満で1カラムになる最低限の対応とする。
- 信頼性: ローカルストレージ以外に外部データベースは使用しない。ビルド時の静的データがソースとなる。
- セキュリティ/プライバシー: 個人利用のため認証不要。ローカルストレージのデータはユーザー端末内のみで完結。
- メンテナンス性: 試験データの追加・更新が CSV を介して容易に行えるようスキーマを明示し、変換スクリプトを再利用可能にする。

## 制約・前提
- 既存の問題データは管理者（利用者自身）が手作業または独自手段で CSV へ投入する。
- 変換スクリプトはローカル実行を想定し、CI/CD で自動反映する運用は現時点では考えない。
- 複数試験への拡張を見据えてデータ構造には `exam_id` を含める。
- 記述式問題は扱わない。複数選択の択一および多選択に対応できるようにしておく。
- 画像・図版は初期スコープ外。必要な場合は別途管理方法を検討する。

## 未決定事項・フォローアップ
- CSV から JSON へ変換するスクリプトの実装とテスト（仕様は `docs/csv-to-json-spec.md` 参照）。
- 複数選択 UI の操作フロー（チェックボックス＋確定ボタン）のデザインモック検証。
- 復習機能の運用（不正解時に自動フラグON、ユーザー操作で復習済み/未に切替）の細部定義。
- 学習セッションの終了条件（自動終了のタイミングや終了後の表示内容）の最終決定。
- スマートフォン対応の優先度とテスト方針（暫定対応済みの幅768px未満1カラム表示の扱い）。
- 将来の複数資格対応時のナビゲーション構成（トップで資格一覧→演習ページ）、およびデータ分割戦略の具体化。
